<div class="product-list-container">
  <h1>Cat√°logo de Productos</h1>

  <div class="search-bar">
    <nz-input-group nzSearch [nzAddOnAfter]="suffixIconButton">
      <input
        type="text"
        nz-input
        placeholder="Buscar productos..."
        [(ngModel)]="searchTerm"
        (ngModelChange)="filterProducts()"
      />
    </nz-input-group>
    <ng-template #suffixIconButton>
      <button nz-button nzType="primary" nzSearch (click)="filterProducts()">
        <span nz-icon nzType="search"></span>
      </button>
    </ng-template>
  </div>

  <nz-table
    #basicTable
    [nzData]="displayProducts"
    [nzPageSize]="pageSize"
    [nzPageIndex]="pageIndex"
    [nzTotal]="totalItems"
    (nzPageIndexChange)="onPageIndexChange($event)"
  >
    <thead>
    <tr>
      <th></th> <th>Nombre</th>
      <th>Marca</th>
      <th>Precio</th>
      <th>Acciones</th>
    </tr>
    </thead>
    <tbody>
      @for (product of basicTable.data; track product.product_id) {
        <tr>
          <td>
            <img [src]="product.image_url" [alt]="product.display_name" class="product-image">
          </td>
          <td>{{ product.display_name }}</td>
          <td>{{ product.brand }}</td>
          <td>${{ product.list_price }}</td>
          <td>
            <button nz-button nzType="primary" (click)="addToCart(product)">
              Agregar al carrito
            </button>
          </td>
        </tr>
      }
    </tbody>
  </nz-table>

</div>
